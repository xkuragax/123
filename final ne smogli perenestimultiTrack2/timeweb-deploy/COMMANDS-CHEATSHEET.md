# üìù –®–ø–∞—Ä–≥–∞–ª–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º

## üîå –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
```bash
ssh root@–¢–í–û–ô_IP
```

## üìÅ –ù–∞–≤–∏–≥–∞—Ü–∏—è
```bash
pwd                    # –ì–¥–µ —è —Å–µ–π—á–∞—Å?
ls                     # –ü–æ–∫–∞–∑–∞—Ç—å —Ñ–∞–π–ª—ã
ls -la                 # –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã (–≤–∫–ª—é—á–∞—è —Å–∫—Ä—ã—Ç—ã–µ)
cd /var/www/multitrack # –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cd ..                  # –ù–∞ —É—Ä–æ–≤–µ–Ω—å –≤—ã—à–µ
```

## üöÄ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º
```bash
cd /var/www/multitrack

# –°—Ç–∞—Ç—É—Å
pm2 status

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
pm2 restart multitrack-player

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
pm2 stop multitrack-player

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
pm2 start multitrack-player

# –õ–æ–≥–∏
pm2 logs

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (Ctrl+C —á—Ç–æ–±—ã –≤—ã–π—Ç–∏)
pm2 logs --follow
```

## üåê Nginx (–≤–µ–±-—Å–µ—Ä–≤–µ—Ä)
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥–∞
nginx -t

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
systemctl restart nginx

# –°—Ç–∞—Ç—É—Å
systemctl status nginx

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
systemctl stop nginx

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
systemctl start nginx
```

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
```bash
cd /var/www/multitrack

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (–ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã)
npm run init-db

# –§–∞–π–ª –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
data/multitrack.db
```

## üì§ –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤

### –ß–µ—Ä–µ–∑ scp (–∏–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ —Ç–≤–æ–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞):
```bash
# –ó–∞–≥—Ä—É–∑–∏—Ç—å –æ–¥–∏–Ω —Ñ–∞–π–ª
scp —Ñ–∞–π–ª.mp3 root@–¢–í–û–ô_IP:/var/www/multitrack/public/uploads/

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø–∞–ø–∫—É
scp -r –ø–∞–ø–∫–∞/ root@–¢–í–û–ô_IP:/var/www/multitrack/public/uploads/
```

## üîß –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

### –ß–µ—Ä–µ–∑ nano (–ø—Ä–æ—Å—Ç–æ–π —Ä–µ–¥–∞–∫—Ç–æ—Ä):
```bash
nano –∏–º—è_—Ñ–∞–π–ª–∞          # –û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª
# Ctrl+O ‚Üí Enter        # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
# Ctrl+X                # –í—ã–π—Ç–∏
# Ctrl+K                # –í—ã—Ä–µ–∑–∞—Ç—å —Å—Ç—Ä–æ–∫—É
# Ctrl+U                # –í—Å—Ç–∞–≤–∏—Ç—å
# –°—Ç—Ä–µ–ª–∫–∏               # –ù–∞–≤–∏–≥–∞—Ü–∏—è
```

### –ß–µ—Ä–µ–∑ vim:
```bash
vim –∏–º—è_—Ñ–∞–π–ª–∞
# i                     # –†–µ–∂–∏–º –≤—Å—Ç–∞–≤–∫–∏
# Esc :w              # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
# Esc :q              # –í—ã–π—Ç–∏
# Esc :wq             # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –≤—ã–π—Ç–∏
# Esc :q!             # –í—ã–π—Ç–∏ –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
```

## üÜò –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –ø–æ–º–æ—â—å

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç):
```bash
pm2 logs multitrack-player        # –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –æ—à–∏–±–∫–∏
pm2 logs multitrack-player --follow   # –°–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (Ctrl+C —á—Ç–æ–±—ã –≤—ã–π—Ç–∏)
```
üí° **–°–º–æ—Ç—Ä–∏ –∫—Ä–∞—Å–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ ‚Äî —ç—Ç–æ –æ—à–∏–±–∫–∏!**

### –í—Å—ë —Å–ª–æ–º–∞–ª–æ—Å—å ‚Äî —Å–¥–µ–ª–∞—Ç—å —Å –Ω—É–ª—è:
```bash
cd /var/www/multitrack
pm2 stop multitrack-player
rm -rf node_modules data
npm install
npm run init-db
pm2 start ecosystem.config.js
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∑–∞–Ω–∏–º–∞–µ—Ç –º–µ—Å—Ç–æ:
```bash
df -h                   # –°–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ
du -sh /var/www/multitrack/public/uploads    # –†–∞–∑–º–µ—Ä –∑–∞–≥—Ä—É–∑–æ–∫
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã:
```bash
top                     # –ü—Ä–æ—Ü–µ—Å—Å—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (Q –¥–ª—è –≤—ã—Ö–æ–¥–∞)
htop                    # –ö—Ä–∞—Å–∏–≤—ã–π top (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
ps aux | grep node      # –ù–∞–π—Ç–∏ Node.js –ø—Ä–æ—Ü–µ—Å—Å—ã
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç—ã:
```bash
netstat -tlnp           # –ö–∞–∫–∏–µ –ø–æ—Ä—Ç—ã —Å–ª—É—à–∞—é—Ç—Å—è
ss -tlnp                # –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è
```

## üíæ –ë—ç–∫–∞–ø—ã

### –†—É—á–Ω–æ–π –±—ç–∫–∞–ø –±–∞–∑—ã:
```bash
cp /var/www/multitrack/data/multitrack.db /var/www/multitrack/data/backup-$(date +%Y%m%d).db
```

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞:
```bash
pm2 stop multitrack-player
cp /var/www/multitrack/data/backup-20240115.db /var/www/multitrack/data/multitrack.db
pm2 start multitrack-player
```

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞

```bash
cd /var/www/multitrack

# –ï—Å–ª–∏ —á–µ—Ä–µ–∑ git:
git pull

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ package.json –∏–∑–º–µ–Ω–∏–ª—Å—è)
npm install

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
pm2 restart multitrack-player
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```bash
# –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ CPU/RAM
top

# –î–∏—Å–∫
iotop                   # –ù—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å: apt install iotop

# –°–µ—Ç—å
iftop                   # –ù—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å: apt install iftop
```

## ‚ö° –ë—ã—Å—Ç—Ä—ã–µ —Ñ–∏–∫—Å—ã

| –ü—Ä–æ–±–ª–µ–º–∞ | –†–µ—à–µ–Ω–∏–µ |
|----------|---------|
| –°–∞–π—Ç –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è | `pm2 restart multitrack-player && systemctl restart nginx` |
| –û—à–∏–±–∫–∞ 502 | `pm2 restart multitrack-player` |
| –û—à–∏–±–∫–∞ 404 –Ω–∞ —Ñ–∞–π–ª–∞—Ö | `chmod 755 /var/www/multitrack/public/uploads` |
| –ó–∞–≤–∏—Å –ø—Ä–æ—Ü–µ—Å—Å | `killall -9 node && pm2 restart all` |
| –ù–µ—Ç –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ | `rm -rf /var/www/multitrack/logs/*` |

---

**üí° –°–æ–≤–µ—Ç:** –ö–æ–ø–∏—Ä—É–π –∫–æ–º–∞–Ω–¥—ã –æ—Ç—Å—é–¥–∞ –∏ –≤—Å—Ç–∞–≤–ª—è–π –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª –ø—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π –º—ã—à–∏!
